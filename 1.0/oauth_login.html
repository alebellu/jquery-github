<script>
function getUrlVars()
{
  var vars = [], hash;
  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
  for(var i = 0; i < hashes.length; i++)
  {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
  }
  return vars;
}

window.opener.postMessage( {
    origin: "github_oauth",
    code: getUrlVars().code,
    state: getUrlVars().state
  }, window.location );

window.close();
</script>
